<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- <title>Cohere Chat with Semantic Search</title> -->
  <title>Cohere Chat</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
</head>
<body>
  <div class="app-container">
    <!-- Document Sidebar -->
    <aside class="document-sidebar" id="documentSidebar">
      <div class="sidebar-header">
        <h3>📁 Documents</h3>
        <button class="sidebar-toggle" id="sidebarToggle">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </button>
      </div>
      
      <div class="upload-section">
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">📄</div>
          <div class="upload-text">Click or drag files here</div>
          <div class="upload-hint">Supports: PDF, DOCX, TXT, MD</div>
          <div class="upload-progress" id="uploadProgress">Processing...</div>
          <input type="file" id="fileInput" class="file-input" accept=".pdf,.docx,.txt,.md" multiple>
        </div>
      </div>
      
      <!-- Semantic Search Section -->
      <div class="search-section">
        <div class="search-header">
          <span class="search-title">🔍 Search Documents</span>
        </div>
        <input type="text" id="searchInput" class="search-input" placeholder="Search your documents...">
        <button id="searchBtn" class="search-btn">Search</button>
        <div class="search-results" id="searchResults"></div>
      </div>
      
      <div class="documents-list" id="documentsList">
        <div class="no-documents">No documents uploaded yet</div>
      </div>
      
      <div class="document-toggle">
        <label class="toggle-label">
          <input type="checkbox" id="useDocuments" class="toggle-checkbox">
          <span class="toggle-slider"></span>
          <span class="toggle-text">Use Documents</span>
        </label>
      </div>
    </aside>
    
    <!-- Main Chat Area -->
    <main class="chat-container">
      <div class="chat-header">
        <button class="menu-btn" id="menuBtn">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </button>
        <h1>Cohere Chat</h1>
        <div class="chat-status">
          <span class="status-indicator" id="statusIndicator"></span>
          <span id="statusText">General Mode</span>
        </div>
        <div class="chat-actions">
          <button id="clear-history" class="action-btn" title="Clear History">
            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
            </svg>
          </button>
        </div>
      </div>
      
      <div id="chat" class="chat-box">
        <div class="message bot">
          Hello! I'm your enhanced Cohere chat assistant with semantic search capabilities. Upload documents and use the search feature to find relevant information, or enable "Use Documents" mode for context-aware conversations.
        </div>
      </div>
      
      <form id="chat-form" class="input-form">
        <input id="message-input" type="text" placeholder="Ask anything..." required />
        <button type="submit" title="Send">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.59 5.58L20 12l-8-8-8 8z"/>
          </svg>
        </button>
      </form>
    </main>
  </div>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>